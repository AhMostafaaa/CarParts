<!-- الحاوي الرئيسي للموقع مع إمكانية النقر للإغلاق -->
<div class="app-container" [class.filter-active]="filtersOpened" (click)="onSiteClick($event)">

  <!-- ✅ Pre-Navbar مع بيانات المستخدم -->
  <app-pre-navbar
   *ngIf="!isAuthRoute"
    [isMerchant]="userData.isMerchant"
    [isDriver]="userData.isDriver"
    [pendingOrdersCount]="userData.pendingOrdersCount"
    [deliveryOrdersCount]="userData.deliveryOrdersCount"
    [userName]="userData.userName">
  </app-pre-navbar>

  <!-- ✅ الهيدر مع زر الفلتر -->
  <app-header
    *ngIf="!isAuthRoute"
    [isFilterOpen]="filtersOpened"
    (toggleFilter)="toggleFilters()">
  </app-header>

  <!-- ✅ محتوى الصفحة الرئيسية -->
  <main class="main-content">
    <router-outlet></router-outlet>
  </main>

  <!-- ✅ الفوتر -->
  <app-footer   *ngIf="!isAuthRoute"></app-footer>

</div>

<!-- ✅ Sidebar الفلتر - خارج الحاوي الرئيسي -->
<div   *ngIf="!isAuthRoute" class="filters-sidebar" [class.open]="filtersOpened" (click)="$event.stopPropagation()">
  <app-parts-filter
    [isOpen]="filtersOpened"
    (filtersChanged)="handleFilters($event)"
    (closeFilter)="closeFilters()">
  </app-parts-filter>
</div>

<!-- Overlay للشاشات الصغيرة -->
<div

  class="filter-overlay"
  [class.active]="filtersOpened"
  (click)="closeFilters()"
  *ngIf="filtersOpened && !isAuthRoute">
</div>

<!-- تلميح النقر للإغلاق (يظهر في الشاشات الكبيرة) -->
<div class="click-to-close-hint" *ngIf="filtersOpened && !isAuthRoute">
  انقر في أي مكان لإغلاق الفلتر
</div>
